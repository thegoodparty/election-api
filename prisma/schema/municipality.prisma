/**
 * MUNICIPALITY
 * (Implements Slug)
 * Represents a municipality that belongs to a county and can have races
 */

enum MunicipalityType {
  LOCAL
  CITY
  TOWN
  TOWNSHIP
  VILLAGE
}
 
model Municipality {
  id          Int           @id @default(autoincrement())
  databaseId  Int?          @map("database_id")
  createdAt   DateTime      @map("created_at") @default(now())
  updatedAt   DateTime      @map("updated_at") @updatedAt
  
  slug        String        @unique
  name        String
  type        MunicipalityType
  state       String?       @db.Char(2)
  
  // Belongs to county (many-to-one)
  countyId    Int?          @map("county_id")
  county      County?       @relation(fields: [countyId], references: [id])
  
  // One municipality -> many races
  races       Race[]
  
  @@map("municipality")
} 